<template>
    <div style="position:relative;">
        <spinner ref="spinner" size="sm" text="Loading"></spinner>

	        <template v-if="isUser">
            <div class="row hidden-xs">
                <div class="col-sm-8">
                    <h5>Share your stories with the world</h5>
                </div>
                <div class="col-sm-4 text-right">
                    <button class="btn btn-primary btn-sm" @click="newMode=!newMode">
                        Post Story <i class="fa fa-plus"></i>
                    </button>
                </div>
            </div>
            <div class="row visible-xs">
                <div class="col-sm-12 text-center">
                    <h5>Share your stories with the world</h5>
                </div>
                <div class="col-sm-12 text-center">
                    <button class="btn btn-primary btn-sm" @click="newMode=!newMode">
                        Post Story <i class="fa fa-plus"></i>
                    </button>
                </div>
            </div>
            <hr class="divider lg">
            <hr class="divider inv">
        </template>
        <div class="panel panel-default" v-if="newMode">
            <div class="panel-body">
                <form>
                    <div class="form-group">
                        <label for="newStoryTitle">Story Title</label>
                        <input type="text" class="form-control" id="newStoryTitle" v-model="selectedStory.title" maxlength="60">
                    </div>
                    <div class="form-group">
                        <label for="newStoryContent">Content 
                            <button class="btn btn-default-hollow btn-sm" type="button" @click="newMarkedContentToggle = !newMarkedContentToggle">
                                <span v-show="!newMarkedContentToggle">Preview</span>
                                <span v-show="newMarkedContentToggle">Edit</span>
                            </button>
                            <button class="btn btn-default-hollow btn-sm" type="button" data-toggle="modal" data-target="#markdownExamplesModal">
                                Examples
                            </button>
                        </label>
                        <textarea v-show="!newMarkedContentToggle" class="form-control" id="newStoryContent" v-model="selectedStory.content" minlength="1" rows="10"></textarea>
                        <div class="collapse" :class="{ 'in': newMarkedContentToggle }">
                            <div class="well" v-html="marked(selectedStory.content)"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-sm btn-default" type="button" @click="newMode = false,resetData()">Cancel</button>
                        <button class="btn btn-sm btn-primary" type="button" @click="createStory(selectedStory)">Publish</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="text-center text-muted" v-if="!stories.length">
            <template v-if="isUser">
                <img class="visible-lg" style="width:40px;height:52px;position:absolute;right:60px;top:40px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXsAAAHoCAYAAACozE/mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJGlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjarY09S8NQFIafGxWlYBQJ4iJcFJz8BnFOMxTBoYYiTSaTNEQx1svtrdrJxR/hj+ji6CD4A3RS3N3cBeng4JBKcBLBZznveTicF6y5SKncmoaTttF+rSqbQSjHX7GYZIoxtqKko9x6fRfge/7k4wUB8LQSKZXzNyqttJMAn0ArUdqAOAAWz40yIK4AJz5WBsQ14OhmEILoA05W5HvAiYv8DDi64Xsg3gA7LvIAsLOG74E1AdjDXoCKq1SeSr9W5X8x6YUB8E5VTx9lh0YWTTvtZHVZbq5vbEMzCGVx/b6HAMTsQ+lKSte7A9eH0dvS7Q+gvwbzI6VbWoCZS7hRSVefDd8I8Qi/7V9L5EuIg4aP7gAAOjZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTctMDItMTNUMTU6NTQ6MDUtMDU6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE3LTAyLTEzVDE1OjU0OjA1LTA1OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNy0wMi0xM1QxNTo1NDowNS0wNTowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6YjY4OGIxNDMtNzBmZi00N2E1LWEwN2YtNTFhNzU1YjcwMDc5PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD5hZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTc5ZjQ3MWItMzJiYy0xMTdhLTk4NDctZjRlNjAyNjgwMmUyPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06T3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6ZTQ1NzQ3YjEtODZmNC00ZDAzLWIxN2EtZjg4MDU0YTMzYjY3PC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOmU0NTc0N2IxLTg2ZjQtNGQwMy1iMTdhLWY4ODA1NGEzM2I2Nzwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0wMi0xM1QxNTo1NDowNS0wNTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOmI2ODhiMTQzLTcwZmYtNDdhNS1hMDdmLTUxYTc1NWI3MDA3OTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0wMi0xM1QxNTo1NDowNS0wNTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpJQ0NQcm9maWxlPkFwcGxlIFJHQjwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjE0NDAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjE0NDAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjM3OTwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj40ODg8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PvHQkgYAAAAgY0hSTQAAeiUAAICDAAD0JQAAhNEAAG1f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">
                <em><h4>You haven't posted any stories yet.</h4>
                    <p>Post your first story and let your friends know what's up!</p></em>
            </template>
            <template v-else>
                <em><h4>Currently No Stories</h4>
                    <p>This person hasn't added any stories yet.</p>
                </em>
            </template>
        </div>
        <div class="panel panel-default" v-for="(story, index) in stories">
            <div class="panel-heading" role="tab" :id="'heading-' + story.id ">
                <h5>
                    <a role="button" data-toggle="collapse" data-parent="#accordion" :href="'#collapse-' + story.id" aria-expanded="true" aria-controls="collapseOne">
                        {{ story.title }}
                    <i class="fa fa-chevron-down pull-right"></i></a>
                </h5>
            </div>
            <div :id="'collapse-' + story.id" class="panel-collapse collapse" :class="{'in': index === 0}" role="tabpanel" :aria-labelledby="'heading-' + story.id">
                <div class="panel-body" v-if="editMode !== story.id">
	                <div class="row">
	                    <div class="col-sm-8">
	                        <h5 class="media-heading" style="margin:4px 0 10px;"><a href="#">{{ story.author }}</a> <small>published a story {{ story.putd_at }}.</small></h5>
	                    </div>
	                    <div class="col-sm-4 text-right hidden-xs">
	                        <div style="padding: 0;" v-if="isUser">
	                            <div role="group" aria-label="...">
	                                <a class="btn btn-xs btn-default-hollow small" @click="selectedStory = story,editMode = story.id"><i class="fa fa-pencil"></i> Edit</a>
	                                <a class="btn btn-xs btn-default-hollow small" @click="selectedStory = story,deleteModal = true"><i class="fa fa-trash"></i> Delete</a>
	                            </div>
	                        </div>
	                    </div>
	                    <div class="col-sm-4 text-center visible-xs">
	                        <div style="padding: 0;" v-if="isUser">
	                            <div role="group" aria-label="...">
	                                <a class="btn btn-xs btn-default-hollow small" @click="selectedStory = story,editMode = story.id"><i class="fa fa-pencil"></i> Edit</a>
	                                <a class="btn btn-xs btn-default-hollow small" @click="selectedStory = story,deleteModal = true"><i class="fa fa-trash"></i> Delete</a>
	                            </div>
	                        </div>
	                    </div>
	                </div>
	                <hr class="divider inv">
	                    <p class="small">{{ marked(story.content) }}</p>
                </div>
                <div class="panel-body" v-if="editMode === story.id">
                    <form>
                        <div class="form-group">
                            <label for="selectedStoryTitle">Title</label>
                            <input type="text" class="form-control" id="selectedStoryTitle" v-model="selectedStory.title" maxlength="60">
                        </div>
                        <div class="form-group">
                            <label for="selectedStoryContent">Content
                                <button class="btn btn-default-hollow btn-sm" type="button" data-toggle="collapse" :data-target="'#markdownPrev' + index"
                                        aria-expanded="false" aria-controls="markdownPrev" @click="editMarkedContentToggle = !editMarkedContentToggle">
                                    <span v-show="!editMarkedContentToggle">Preview</span>
                                    <span v-show="editMarkedContentToggle">Edit</span>
                                </button>
                                <button class="btn btn-default-hollow btn-sm" type="button" data-toggle="modal" data-target="#markdownExamplesModal">
                                    Examples
                                </button>
                            </label>
                            <textarea v-show="!editMarkedContentToggle" class="form-control" id="selectedStoryContent" v-model="selectedStory.content" minlength="1" rows="20"></textarea>
                            <div class="collapse" :class="{ 'in': editMarkedContentToggle }">
                                <div class="well" v-html="marked(selectedStory.content)"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-sm btn-default" type="button" @click="editMode = null">Cancel</button>
                            <button class="btn btn-sm btn-primary" type="button" @click="updateStory(selectedStory)">Update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-sm-12 text-center">
            <hr class="divider inv">
            <pagination :pagination="pagination" :callback="searchStories"></pagination>
        </div>

        <modal class="text-center" v-if="isUser" :value="deleteModal" @closed="deleteModal=false" title="Delete Story" :small="true">
            <div slot="modal-body" class="modal-body text-center">Delete this Story?</div>
            <div slot="modal-footer" class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" @click='deleteModal = false'>Keep</button>
                <button type="button" class="btn btn-primary btn-sm" @click='deleteModal = false,removeStory(selectedStory)'>Delete</button>
            </div>
        </modal>
        <markdown-example-modal v-if="isUser"></markdown-example-modal>
    </div>
</template>
<script type="text/javascript">
    import _ from 'underscore';
    import markdownExampleModal from '../markdown-example-modal.vue';
    let marked = require('marked');
    export default{
        name: 'user-profile-stories',
        components:{'markdown-example-modal': markdownExampleModal},
        props:['id'],
        data(){
            return{
                stories: [],
                deleteModal: false,
                selectedStory: {
                    title: '',
                    content:'',
                    publications: [
                        { type: 'users', id: this.id },
                    ]
                },
                editMode: false,
                editMarkedContentToggle: false,

                newMode: false,
                newMarkedContentToggle: false,
                includeProfile: false,

                // pagination vars
                page: 1,
                per_page: 5,
                pagination: { current_page: 1 },

            }
        },
        computed: {
            isUser(){
                return this.$root.user && this.id === this.$root.user.id;
            },
        },
        watch: {
            page(val, oldVal) {
                this.searchStories();
            },
        },
        methods:{
            marked: marked,
            removeStory(story){
                if(story) {
                    this.$http.delete('stories/' + story.id).then((response) => {
                        this.stories = _.reject(this.stories, (item) => {
                            return item.id === story.id;
                        });
                        this.resetData();
                        this.searchStories();
                    }).catch(this.$root.handleApiError);
                }
            },
            updateStory(story){
                if(story) {
                    story.author_id = this.$root.user.id;
                    story.author_type = 'users';
                    story.publications = [{ type: 'users', id: this.id }];

                    // this.$refs.spinner.show();
                    this.$http.put('stories/' + story.id, story).then((response) => {
                        this.editMode = false;
                        this.resetData();
                        // this.$refs.spinner.show();
                        return response.data.data;
                        //this.searchStories();
                    }).catch(this.$root.handleApiError);
                }
            },
            createStory(story){
                if(story) {
                    story.author_id = this.$root.user.id;
                    story.author_type = 'users';

                    this.$http.post('stories', story).then((response) => {
                        this.newMode = false;
                        this.resetData();
                        this.searchStories();
                    }).catch(this.$root.handleApiError);
                }
            },
            searchStories(){
                this.$http.get('stories', { params: {
                    user: this.id,
                    page: this.pagination.current_page,
                    per_page: this.per_page,
                }}).then((response) => {
                    this.stories = response.data.data;
                    this.pagination = response.data.meta.pagination;
                }).catch(this.$root.handleApiError);
            },
            resetData(){
                this.selectedStory =  {
                    title: '',
                    content:''
                };
            }
        },
        mounted(){
            this.searchStories();
        }
    }
</script>
